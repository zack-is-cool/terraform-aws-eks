{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'github>defenseunicorns/narwhal-delivery-renovate-config:terraformReposAuto.json5',
  ],
  customDatasources: {
    awsVpcCni: {
      defaultRegistryUrlTemplate: 'https://raw.githubusercontent.com/awsdocs/amazon-eks-user-guide/refs/heads/mainline/latest/ug/networking/managing-vpc-cni.adoc',
      format: 'plain',
      transformTemplates: [
        '{"releases": $map(releases.version.$match(/v\\d+\\.\\d+\\.\\d+-eksbuild\\.\\d+/), function($v) { {"version": $v.match} })}',
      ],
    },
  },
  logLevelRemap: [
    {
      matchMessage: '/.*/',
      newLogLevel: 'trace',
    },
  ],
  forkProcessing: 'enabled',
  schedule: [
    'at any time',
  ],
  customManagers: [
    {
      customType: 'regex',
      fileMatch: [
        '(^|/).*\\.tfvars$',
      ],
      matchStrings: [
        'addon_version\\s*=\\s*"(?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"',
      ],
      datasourceTemplate: 'custom.awsVpcCni',
      depNameTemplate: 'awsVpcCni',
    },
  ],
}
